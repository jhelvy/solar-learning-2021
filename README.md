
<!-- README.md is generated from README.Rmd. Please edit that file -->

Repository to reproduce results from our study on global versus national
learning rates in the solar PV industry.

# Folder descriptions

## data

Contains all of the “raw” data used in our analyses as well as a single
`formatted.Rds` file that when loaded into R is a list of formatted data
frames, which is generated by running the script at
`code/2format_data.R`.

## code

| file or folder            | description                                                                                                                                                                                             |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `0functions.R`            | Custom functions                                                                                                                                                                                        |
| `0setup.R`                | Loads libraries, creates `dir` object (a list of paths to folders and objects), and loads `0functions.R`                                                                                                |
| `1digitize_plots.R`       | Code to extract data from some image files in the `data` folder                                                                                                                                         |
| `2format_data.R`          | Formats and harmonizes all raw data and saves the result as the list object at `data/formatted.Rds`                                                                                                     |
| `3compare_us_data.R`      | Some quick checks to compare the capacity data (NREL, SEIA, and IRENA) and cost data (NREL and LBNL) for the U.S. We decided to use the SEIA data for capacity and LBNL data for cost for our analyses. |
| `4learning_curves.R`      | Estimates learning curve models and saves all results as the list object at `output/lr_models.Rds`                                                                                                      |
| `5historical_scenarios.R` | Uses the estimates learning curves models to compute differences in historical costs under different scenarios. Results are saved as the list object at `output/historical_scenarios.Rds`               |
| `6projection_scenarios.R` | Uses the estimates learning curves models to compute differences in projected future costs under different scenarios. Results are saved as the list object at `output/projection_scenarios.Rds`         |
| `7charts.R`               | All charts                                                                                                                                                                                              |

## figs

All charts created in the `code/7charts.R` file are saved here as pdfs
and pngs.

## output

All model / scenario analyses outputs (other than charts) are saved
here.

# Reproducing the analyses

## Setup

Most R files in the `/code` folder start with the following line to set
up the working environment:

``` r
source(here::here('code', '0setup.R'))
```

## Formatting the data

All of the raw data are stored in the `/data` folder. The script at
`/code/2format_data.R` formats all of this data and saves it as a list
stored at `/data/formatted.Rds`.

To load this list of formatted data, run this line after sourcing the
`/code/0setup.R` file:

``` r
data <- readRDS(dir$data_formatted)

# Names of the formatted data frames:
names(data)
```

    ##  [1] "pvProduction"       "irenaCumCapacityMw" "nrelCapacity"      
    ##  [4] "nrelCost"           "seiaCapacity"       "lbnlCost"          
    ##  [7] "usNrel"             "usSeia"             "usSeiaLbnl"        
    ## [10] "china"              "germany"            "world"

## Learning curve models

All of the learning curve models are estimated by running the
`/code/4learning_curves.R` file. Results are saved in a list of data
frames containing formatted model results stored in
`/output/lr_models.Rds`.

To load formatted results, run this line:

``` r
lr <- readRDS(dir$lr_models)

# Names of the LR models:
names(lr)
```

## Historical scenarios

All of the historical (2008 - 2018) cost scenario calculations are
computed by running the `/code/5historical_scenarios.R` file. Results
are saved in a list of data frame containing formatted results stored in
`/output/historical_scenarios.Rds`.

To load the results of the historical scenarios, run this line:

``` r
cost <- readRDS(dir$historical_scenarios)

# Names of the scenarios:
names(cost)
```

    ## [1] "cost_scenarios" "savings"

## Projected scenarios

All of the future projected (2018 - 2030) cost scenario calculations are
computed by running the `/code/6projection_scenarios.R` file. Results
are saved in a list of data frame containing formatted results stored in
`/output/projection_scenarios.Rds`.

To load the results of the projected scenarios, run this line:

``` r
proj <- readRDS(dir$projection_scenarios)

# Names of the scenarios:
names(proj)
```

    ##  [1] "capacity_us"                   "capacity_us_national"         
    ##  [3] "capacity_china"                "capacity_china_national"      
    ##  [5] "capacity_germany"              "capacity_germany_national"    
    ##  [7] "capacity_world"                "us_global_hist_cost"          
    ##  [9] "us_global_modeled_cost"        "us_national_hist_cost"        
    ## [11] "us_national_modeled_cost"      "china_global_hist_cost"       
    ## [13] "china_global_modeled_cost"     "china_national_hist_cost"     
    ## [15] "china_national_modeled_cost"   "germany_global_hist_cost"     
    ## [17] "germany_global_modeled_cost"   "germany_national_hist_cost"   
    ## [19] "germany_national_modeled_cost"

## Charts

All of the charts are generated by running the `/code/7charts.R` file.
Results are saved as pngs and pdfs in the `/figs` folder.
